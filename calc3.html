<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calc3</title>
</head>
<body>
    <script>
        var expressions = prompt("Enter expressions:");
        document.write("Entered expressions:<br>");
        var expressions_list = expressions.split(";");
        for(var i = 0; i < expressions_list.length; i++){
            document.write(expressions_list[i] + "<br>");
        }
        document.write("Sums:<br>");
        for(var i = 0; i < expressions_list.length; i++){
            var expression = expressions_list[i].trim();
            if(expression.length == 0){
                break;
            }
            var num1 = expression.split(/\s*[\+\-]\s*/, 1);
            var rest = expression.substring(num1.length, expression.length).match(/\s*[\+\-]\s*\d+\^*/g);
            var sum = parseInt(num1[0]);
            if(num1[0].indexOf("^") > 0){
                sum = Math.pow(sum, 2);
            }
            if(rest != null){
                for(var j = 0; j < rest.length; j++){
                    var trimmed = rest[j].trim();
                    var sign = trimmed.charAt(0);
                    var num = trimmed.substring(1, trimmed.length);
                    num = num.indexOf("^") > 0 ? Math.pow(parseInt(num), 2) : parseInt(num);
                    sum = sign == "+" ? sum + num : sum - num;
                }
                document.write(sum + "<br>");
            } else {
                var pos = num1[0].indexOf("^");
                num1 = pos > 0 ? num1 = Math.pow(parseInt(num1[0]), 2) : parseInt(num1[0]);
                document.write(num1 + "<br>");
            }
        }
    </script>
</body>
</html>